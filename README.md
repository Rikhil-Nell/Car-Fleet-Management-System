# Car Fleet Management System API

This is the backend for the Car Fleet Management System, a FastAPI-based application designed to manage vehicle fleets, monitor telemetry data, and generate alerts and analytics.

## Features

- **Vehicle Management:** CRUD operations for vehicles.
- **Telemetry Data:** Ingest and store vehicle telemetry data (e.g., speed, fuel level, location).
- **Alerts:** Generate alerts for events like speeding or low fuel.
- **Analytics:** Provide basic analytics on fleet performance.

## Project Setup

### Prerequisites

- Python 3.10+
- [uv](https://github.com/astral-sh/uv) (recommended) or pip
- [Docker](https://www.docker.com/) and [Docker Compose](https://docs.docker.com/compose/)

### 1. Clone the Repository

```bash
git clone <repository-url>
cd car-fleet-management-system/backend
```

### 2. Set Up the Environment

It is recommended to use `uv` for faster dependency management.

**Using `uv` (Recommended):**

```bash
# Install dependencies
uv sync

# On Windows
.venv\Scripts\activate
```

**Using `pip` (Alternative):**

```bash
# Create a virtual environment
python -m venv .venv

# Activate the environment
# On Windows
.venv\Scripts\activate
# On macOS/Linux
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt 
# Note: You may need to generate a requirements.txt file first if one isn't present.
# pip freeze > requirements.txt
```

### 3. Set Up Environment Variables

Copy the example `.env.example` file to `.env` and update the values as needed.

```bash
cp .env.example .env
```

### 4. Start the Database

This project uses a PostgreSQL database managed with Docker Compose.

```bash
docker-compose up -d
```

This command will start a PostgreSQL container with the database configuration specified in `docker-compose.yml`.

### 5. Run Database Migrations

The project uses Alembic for database migrations.

```bash
alembic upgrade head
```

### 6. Run the Application

```bash
cd backend
uvicorn app.main:app --reload
```

The API will be available at `http://127.0.0.1:8000`. You can access the OpenAPI documentation at `http://127.0.0.1:8000/docs`.

## API Endpoints

The API is versioned under `/api/v1`. Here are the main routers:

- `/api/v1/vehicles`: Manage vehicles in the fleet.
- `/api/v1/telemetry_data`: Submit and retrieve telemetry data.
- `/api/v1/alerts`: View alerts generated by the system.
- `/api/v1/analytics`: Access fleet analytics.

## Docker

A `docker-compose.yml` is provided to run the PostgreSQL database. You can extend it to run the entire application in containers.
